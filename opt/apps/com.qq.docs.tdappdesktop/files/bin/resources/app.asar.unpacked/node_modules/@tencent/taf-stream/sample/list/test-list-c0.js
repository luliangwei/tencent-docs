var Taf  = require("../../libjce");
var Test = require('../jce/StatFJce.js').Test;

var list  = new Taf.List(Test.StatMicMsgHead);

for (var ii = 0; ii < 1000; ii++) {
    var head = new Test.StatMicMsgHead();
    head.masterName       = 'MASTERNAME-' + ii.toString();
    head.slaveName        = 'MTT.NodejsTestServer';
    head.interfaceName    = 'HttpObj';
    head.masterIp         = '127.0.0.1';
    head.slaveIp          = '10.231.129.90';
    head.slavePort        = 80;
    head.returnValue      = 0;

    list.push(head);
}

var os = new Taf.JceOutputStream();
os.writeList(1, list);

var is = new Taf.JceInputStream(os.getBinBuffer());
var ta = is.readList(1, true, Taf.List(Test.StatMicMsgHead));

ta.forEach(function (value, index){
    console.log("INDEX:", index);

    console.log("MASTERNAME:", value.masterName);
});
