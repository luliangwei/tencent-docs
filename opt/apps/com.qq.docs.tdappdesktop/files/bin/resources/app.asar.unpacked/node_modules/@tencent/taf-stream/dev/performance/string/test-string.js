var Taf   = require('../../../libjce.js');

var byteLength = 0;

var testStr = new Array(32).join("abcdefgh");

function test_performance (num) {
    var begin = new Date().getTime();

    var test_case = function () {
        var os = new Taf.JceOutputStream();
        for (var ii = 0; ii < 100; ii++) {
            os.writeString(ii,testStr);
        }
        byteLength += os.getBinBuffer().toNodeBuffer().length;
    }

    for (var i = 0;i < num; i++) {
        test_case(i);
    }
    var totalTime = (new Date().getTime()) - begin;
    console.log("time:", totalTime ,"total bytes:",byteLength,"  码率:", (byteLength/1024/1024)/(totalTime/1000), "MB/S");
}

test_performance(100000);
