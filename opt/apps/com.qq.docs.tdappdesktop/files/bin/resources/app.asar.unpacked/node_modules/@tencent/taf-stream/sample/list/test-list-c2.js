var Taf = require("../../libjce");
var Ext = require("../jce/ExtJce.js").Ext;

var list = new Taf.List(Taf.Map(Taf.String, Ext.ExtInfo));
for (var i = 0; i < 10; i++) {
    var map = new Taf.Map(Taf.String, Ext.ExtInfo);
    for (var ii = 0; ii < 10; ii++) {
        var key = "KEY-" + i.toString() + "-" + ii.toString();
        var val = new Ext.ExtInfo();
        val.sUserName = "USERNAME-" + i.toString() + "-" + ii.toString();

        map.insert(key, val);
    }

    list.push(map);
}

var ost = new Taf.JceOutputStream();
ost.writeList(0, list);

var ist = new Taf.JceInputStream(ost.getBinBuffer());
var tmp = ist.readList(0, true, Taf.List(Taf.Map(Taf.String, Ext.ExtInfo)));

tmp.forEach(function (value, index){
    console.log("INDEX:", index);
    value.forEach(function (key, value){
        console.log("    ", key, value.sUserName);
    });
});
