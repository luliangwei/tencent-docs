var Taf = require("../../../");
var Ext = require("./ExtJce.js").Ext;

//STEP01 - 声明数组
var list = new Taf.List(Taf.String);
var i,len;
//STEP02 - 赋值
for (i = 0; i < 10; i++) {
    list.push("LIST." + i.toString());
}

//STEP03 - 遍历
for (i = 0, len = list.length; i < len; i++) {
	console.log(list.value[i]);
}

list.forEach(function (value, index){
    console.log("forEach:", value, index);
});

//STEP04 - 获取数组的大小
console.log("ARRAY.LENGTH =", list.length);

//JCE编解码示例
var ia = new Ext.ExtInfo();
ia.stra = "testa";
ia.strc = "testc";

var ib = new Taf.List(Ext.PKFLAG);
ib.push(Ext.PKFLAG.PKFLAG_CRYPT);
ib.push(Ext.PKFLAG.PKFLAG_SHOW_TERM);

var os = new Taf.JceOutputStream();
os.writeList(1, list);
os.writeStruct(2, ia);
os.writeList(3, ib);

var is = new Taf.JceInputStream(os.getBinBuffer());
var ta = is.readList(1, true, Taf.List(Taf.String));
var tc = is.readStruct(2, false, Ext.ExtInfo);
var tb = is.readList(3, false, Taf.List(Ext.PKFLAG));

ta.forEach(function (value, index){
    console.log("Read forEach:", value, index);
});

tb.forEach(function (value, index){
    console.log("Read forEach:", value, index);
});

console.log("TB:", tb);
console.log("TC:", tc.stra, tc.strc);
