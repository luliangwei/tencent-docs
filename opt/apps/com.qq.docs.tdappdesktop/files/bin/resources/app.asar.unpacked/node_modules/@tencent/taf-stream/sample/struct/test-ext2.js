var Taf = require("../../libjce");
var Ext = require("../jce/ExtProxy.js").Ext;

var abcd = new Taf.BinBuffer();
abcd.writeInt32(12345678);

var temp = new Ext.ExtInfo();
var data=new Taf.Map(Taf.String, Taf.BinBuffer);

var cons=new Taf.Map(Taf.String, Taf.Map(Taf.String, Taf.BinBuffer));
data.readFromObject({
    abcd:abcd
});
console.log(data.abcd,data.toObject().abcd)
//data.readFromObject(data2);
cons.readFromObject({
    mapa:{
        abcd:abcd
    }
});
//temp.data.insert("abcd", abcd);

//temp.cons.insert("mapa", temp.data);
temp.readFromObject({
    "data":{"abcd":abcd},
    "cons":{"data":{"abcd":abcd}}
})
//temp.data=data;
//temp.cons=cons;

var ost = new Taf.JceOutputStream();
ost.writeStruct(1, temp);
console.log("编码完成");
var buffer=ost.getBinBuffer().toNodeBuffer();

var binBuffer=new Taf.BinBuffer();
binBuffer.writeNodeBuffer(buffer);

var ist = new Taf.JceInputStream(binBuffer);
var tst = ist.readStruct(1, true, Ext.ExtInfo);

console.log("struct Object:", tst.toObject());

//console.log("LEN:", tst.data.get("abcd").readInt32());

//console.log("LEN:", tst.cons.get("mapa").get("abcd").readInt32());

